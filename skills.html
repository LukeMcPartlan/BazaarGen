<!DOCTYPE html> 
<html lang="en">
<head>
   <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  
  <script>
      // Domain redirect
      if (window.location.hostname === 'bazzargen.com' || 
          window.location.hostname === 'www.bazzargen.com') {
          
          // Build the correct URL
          var correctUrl = 'https://bazaargen.com' + window.location.pathname + window.location.search + window.location.hash;
          
          // Log for debugging
          console.log('Redirecting from:', window.location.href);
          console.log('Redirecting to:', correctUrl);
          
          // Try multiple redirect methods
          try {
              window.location.replace(correctUrl);
          } catch(e) {
              window.location.href = correctUrl;
          }
      }
      
      // Optional: Redirect www.bazaargen.com to bazaargen.com
      if (window.location.hostname === 'www.bazaargen.com') {
          var correctUrl = 'https://bazaargen.com' + window.location.pathname + window.location.search + window.location.hash;
          try {
              window.location.replace(correctUrl);
          } catch(e) {
              window.location.href = correctUrl;
          }
      }
  </script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Skill Generator - Create Custom Skills | BazaarGen Tool</title>
  
  <!-- SEO Meta Tags -->
  <meta name="description" content="Free online tool to create custom skills and abilities for The Bazaar game." />
  <meta name="keywords" content="Bazaar, Bazaar, BazaarGen, Skill Generator, skill creator, game skills, custom skills, ability cards, hero skills, Reynad, The Bazaar, skill creator, game tool, free generator, online tool, skill design, gaming, TCG, trading card game, skill maker, Mak, Vanessa, Pyg, Dooly, game abilities, passive skills, active skills, cooldown, energy cost, skill customization" />
  <meta name="author" content="Luke Alvarez" />
  <meta name="robots" content="index, follow" />
  <meta name="language" content="English" />
  <meta name="revisit-after" content="7 days" />
  
  <!-- Favicon and Icons -->
  <link rel="icon" type="image/x-icon" href="images/favicon.ico" />
  <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png" />
  <link rel="manifest" href="site.webmanifest" />
  
  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="Skill Generator - Create Custom Skills" />
  <meta property="og:description" content="Free online tool to create custom skills and abilities for The Bazaar game." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://Bazaargen.com/skills.html" />
  <meta property="og:image" content="https://Bazaargen.com/images/site-preview.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:site_name" content="BazaarGen - Bazaar Card Generator" />
  
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Skill Generator - Create Custom Skills" />
  <meta name="twitter:description" content="Free online tool to create custom skills and abilities for The Bazaar game." />
  <meta name="twitter:image" content="https://Bazaargen.com/images/site-preview.png" />
  
  <!-- Additional SEO -->
  <meta name="theme-color" content="#8B7A65" />
  <link rel="canonical" href="https://Bazaargen.com/skills.html" />
  
  <!-- External Libraries -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <link rel="stylesheet" href="styles.css" />

  <style>
    /* Enhanced collection management styles */
    .collection-controls {
      animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .skill-selection-checkbox {
      background: rgba(138, 43, 226, 0.9);
      padding: 8px 12px;
      border-radius: 6px;
      border: 2px solid white;
      transition: all 0.3s ease;
    }

    .skill-selection-checkbox:hover {
      background: rgba(138, 43, 226, 1);
      transform: scale(1.05);
    }

    .skill-selection-checkbox input[type="checkbox"] {
      transform: scale(1.2);
      accent-color: rgb(218, 165, 32);
    }

    .collection-controls h4 {
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
    }

    .collection-controls button {
      position: relative;
      overflow: hidden;
    }

    .collection-controls button::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      transition: all 0.3s ease;
      transform: translate(-50%, -50%);
    }

    .collection-controls button:hover::before {
      width: 300px;
      height: 300px;
    }

    #collectionActions {
      animation: fadeIn 0.5s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; height: 0; }
      to { opacity: 1; height: auto; }
    }

    /* Enhanced form styling */
    .form-input, .form-select {
      transition: all 0.3s ease;
    }

    .form-input:focus, .form-select:focus {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(218, 165, 32, 0.3);
    }

    /* Management section enhancements */
    .management-section {
      position: relative;
      overflow: hidden;
    }

    .management-section::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(218, 165, 32, 0.1), transparent);
      animation: shimmer 3s infinite;
    }

    @keyframes shimmer {
      0% { left: -100%; }
      100% { left: 100%; }
    }

    /* Preview column enhancements */
    .preview-column {
      position: relative;
    }

    .preview-placeholder {
      border: 2px dashed rgba(218, 165, 32, 0.5);
      background: linear-gradient(135deg, rgba(218, 165, 32, 0.1) 0%, rgba(184, 134, 11, 0.05) 100%);
      transition: all 0.3s ease;
    }

    .preview-placeholder:hover {
      border-color: rgba(218, 165, 32, 0.8);
      background: linear-gradient(135deg, rgba(218, 165, 32, 0.15) 0%, rgba(184, 134, 11, 0.1) 100%);
    }

    /* Enhanced button styles */
    .save-card-btn {
      position: relative;
      background: linear-gradient(135deg, rgb(218, 165, 32) 0%, rgb(184, 134, 11) 100%);
      transition: all 0.3s ease;
    }

    .save-card-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(218, 165, 32, 0.4);
    }

    .save-card-btn:active {
      transform: translateY(-1px);
    }

    /* Collection status styling */
    #selectionStatus {
      padding: 8px 12px;
      border-radius: 6px;
      background: rgba(138, 43, 226, 0.1);
      border: 1px solid rgba(138, 43, 226, 0.3);
      transition: all 0.3s ease;
    }

    /* Responsive enhancements */
    @media (max-width: 768px) {
      .collection-controls {
        padding: 15px;
      }

      .collection-controls div[style*="display: flex"] {
        flex-direction: column;
        gap: 10px;
      }

      #collectionNameInput,
      #collectionDescInput {
        min-width: unset !important;
        width: 100%;
      }
    }

    /* Loading states */
    .loading-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(37, 26, 12, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
      z-index: 1000;
    }

    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 4px solid rgba(218, 165, 32, 0.3);
      border-top: 4px solid rgb(218, 165, 32);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <!-- Top Navigation -->
  <nav class="top-nav">
    <div class="nav-container">
      <a href="#" class="nav-logo">BazaarGen</a>
      
      <ul class="nav-menu" id="nav-menu">
        <li class="nav-item">
          <a href="index.html" class="nav-link" data-page="items">Items</a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link active" data-page="skills">Skills</a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link" data-page="browse">Browse</a>
        </li>
      </ul>
      
      <!-- Google sign in stuff-->
      <div class="nav-actions">
        <!-- Google Sign-In Button (shown when not signed in) -->
        <div id="google-signin-button"></div>
    
        <!-- User Info (shown when signed in) -->
        <div class="user-info" id="user-info" style="display: none; align-items: center; gap: 10px;">
            <span class="user-alias" id="user-alias" style="font-weight: 500; color: #333; cursor: pointer;" onclick="editAlias()" title="Click to edit alias"></span>
            <button class="sign-out-btn" onclick="signOut()" style="background: none; border: 1px solid #ddd; padding: 6px 12px; border-radius: 4px; cursor: pointer; color: #666; font-size: 14px;">Sign Out</button>
        </div>
      </div>
      
      <!-- Alias Creation Modal -->
      <div id="alias-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 10000; align-items: center; justify-content: center;">
          <div style="background: white; padding: 30px; border-radius: 8px; max-width: 400px; width: 90%; text-align: center; box-shadow: 0 4px 20px rgba(0,0,0,0.15);">
              <h2 id="alias-modal-title" style="margin: 0 0 10px 0; color: #333;">Welcome to BazaarGen!</h2>
              <p id="alias-modal-description" style="color: #666; margin: 0 0 20px 0;">Choose an alias to display on the site</p>
              
              <input type="text" id="alias-input" placeholder="Enter your alias" 
                     style="width: 100%; padding: 12px; border: 2px solid #ddd; border-radius: 4px; font-size: 16px; margin-bottom: 10px; box-sizing: border-box;">
              
              <div id="alias-error" style="color: #d32f2f; font-size: 14px; margin-bottom: 15px; min-height: 20px;"></div>
              
              <div style="display: flex; gap: 10px; justify-content: center;">
                  <button id="alias-cancel-btn" onclick="cancelAliasCreation()" 
                          style="padding: 10px 20px; border: 1px solid #ddd; background: white; border-radius: 4px; cursor: pointer; color: #666;">
                      Cancel
                  </button>
                  <button id="alias-save-btn" onclick="saveAlias()" 
                          style="padding: 10px 20px; border: none; background: #007bff; color: white; border-radius: 4px; cursor: pointer;">
                      Save Alias
                  </button>
              </div>
          </div>
      </div>

      <div class="nav-toggle" id="nav-toggle">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </nav>

  <!-- Page Header -->
  <div class="page-header">
      <h1 class="page-title">Skill Generator</h1>
      <p class="page-subtitle">Create custom skills and abilities for The Bazaar - save individually or as collections</p>
  </div>

  <!-- Main Two-Column Container -->
  <div class="main-container">
      <!-- Left Column - Form -->
      <div class="form-column">
          <div class="form-grid">
              <div class="form-group full-width">
                  <label class="form-label">Skill Image</label>
                  <input type="file" id="imageInput" accept="image/*" class="form-input" />
                  <small style="color: #666; font-size: 0.85em; margin-top: 5px; display: block;">
                      Upload an image for your skill
                  </small>
              </div>

              <div class="form-group">
                  <label class="form-label">Skill Name</label>
                  <input type="text" id="skillNameInput" placeholder="Enter skill name" class="form-input" />
              </div>

              <div class="form-group">
                  <label class="form-label">Border Color</label>
                  <select id="borderSelect" class="form-select">
                      <option value="bronze">Bronze</option>
                      <option value="silver">Silver</option>
                      <option value="gold" selected>Gold</option>
                      <option value="diamond">Diamond</option>
                      <option value="legendary">Legendary</option>
                  </select>
              </div>

              <div class="form-group full-width">
                  <label class="form-label">Skill Effect</label>
                  <textarea id="skillEffectInput" class="form-input" placeholder="Enter skill effect description" rows="4"></textarea>
                  <div class="character-counter" style="font-size: 12px; color: #666; margin-top: 5px;">0 characters</div>
              </div>
          </div>

          <!-- Keyboard Shortcuts Help -->
          <div class="shortcuts-help">
              <h4>🎮 Keyword Shortcuts - Type these in text boxes:</h4>
              <div class="shortcut-grid">
                  <div class="shortcut-item"><span class="shortcut-key">/s</span> <img src="images/KeyText/slow.png" alt="slow" class="keyword-preview"> <span style="color: rgb(203, 159, 110); font-weight: bold;" class="key-text">slow</span></div>
                  <div class="shortcut-item"><span class="shortcut-key">/h</span> <img src="images/KeyText/haste.png" alt="haste" class="keyword-preview"> <span style="color: rgb(0, 235, 195); font-weight: bold;" class="key-text">haste</span></div>
                  <div class="shortcut-item"><span class="shortcut-key">/he</span> <img src="images/KeyText/heal.png" alt="heal" class="keyword-preview"> <span style="color: rgb(143, 234, 49); font-weight: bold;" class="key-text">heal</span></div>
                  <div class="shortcut-item"><span class="shortcut-key">/r</span> <img src="images/KeyText/regen.png" alt="regen" class="keyword-preview"> <span style="color: rgb(143, 234, 49); font-weight: bold;" class="key-text">regen</span></div>
                  <div class="shortcut-item"><span class="shortcut-key">/p</span> <img src="images/KeyText/poison.png" alt="poison" class="keyword-preview"> <span style="color: rgb(13, 190, 79); font-weight: bold;" class="key-text">poison</span></div>
                  <div class="shortcut-item"><span class="shortcut-key">/b</span> <img src="images/KeyText/burn.png" alt="burn" class="keyword-preview"> <span style="color: rgb(253, 146, 63); font-weight: bold;" class="key-text">burn</span></div>
                  <div class="shortcut-item"><span class="shortcut-key">/c</span> <img src="images/KeyText/charge.png" alt="charge" class="keyword-preview"> <span style="color: rgb(0, 235, 195); font-weight: bold;" class="key-text">charge</span></div>
                  <div class="shortcut-item"><span class="shortcut-key">/cd</span> <img src="images/KeyText/cooldown.png" alt="cooldown" class="keyword-preview"> <span style="color: rgb(0, 235, 195); font-weight: bold;" class="key-text">cooldown</span></div>
                  <div class="shortcut-item"><span class="shortcut-key">/cr</span> <img src="images/KeyText/crit.png" alt="crit" class="keyword-preview"> <span style="color: rgb(244, 82, 60); font-weight: bold;" class="key-text">crit</span></div>
                  <div class="shortcut-item"><span class="shortcut-key">/d</span> <img src="images/KeyText/damage.png" alt="damage" class="keyword-preview"> <span style="color: rgb(244, 82, 60); font-weight: bold;" class="key-text">damage</span></div>
                  <div class="shortcut-item"><span class="shortcut-key">/de</span> <img src="images/KeyText/destroy.png" alt="destroy" class="keyword-preview"> <span style="color: rgb(198, 44, 66); font-weight: bold;" class="key-text">destroy</span></div>
                  <div class="shortcut-item"><span class="shortcut-key">/f</span> <img src="images/KeyText/freeze.png" alt="freeze" class="keyword-preview"> <span style="color: rgb(63, 200, 247); font-weight: bold;" class="key-text">freeze</span></div>
                  <div class="shortcut-item"><span class="shortcut-key">/l</span> <img src="images/KeyText/lifesteal.png" alt="lifesteal" class="keyword-preview"> <span style="color: rgb(181, 56, 115); font-weight: bold;" class="key-text">lifesteal</span></div>
                  <div class="shortcut-item"><span class="shortcut-key">/v</span> <img src="images/KeyText/value.png" alt="value" class="keyword-preview"> <span style="color: rgb(244, 208, 33); font-weight: bold;" class="key-text">value</span></div>
                  <div class="shortcut-item"><span class="shortcut-key">/t</span> <img src="images/KeyText/transform.png" alt="transform" class="keyword-preview"> <span style="color: rgb(90, 230, 233); font-weight: bold;" class="key-text">transform</span></div>
                  <div class="shortcut-item"><span class="shortcut-key">/sh</span> <img src="images/KeyText/sheild.png" alt="sheild" class="keyword-preview"> <span style="color: rgb(245, 208, 33); font-weight: bold;" class="key-text">sheild</span></div>
                  <div class="shortcut-item"><span class="shortcut-key">/mh</span> <img src="images/KeyText/maxhealth.png" alt="maxhealth" class="keyword-preview"> <span style="color: rgb(143, 234, 49); font-weight: bold;" class="key-text">maxhealth</span></div>
              </div>
          </div>
      </div>

      <!-- Right Column - Preview -->
      <div class="preview-column">
          <div class="preview-header">
              ⚡ Live Preview
          </div>
          <div id="previewContainer">
              <div class="preview-placeholder">
                  <p>⚡ Your skill preview will appear here</p>
                  <p style="margin-top: 10px; font-size: 0.9em;">Add a skill name, effect, and upload an image to see the magic happen!</p>
              </div>
          </div>
          
          <!-- Save Skill Button in Preview Column -->
          <div class="preview-actions">
              <button onclick="createSkill()" class="form-button save-card-btn">⚡ Save Skill ⚡</button>
          </div>
      </div>
  </div>

  <!-- Full Width Sections Below -->
  <div class="bottom-sections">
      <!-- Management Actions -->
      <div class="management-section">
          <h3 class="section-title">🗂️ Skill Management</h3>
          <div class="management-actions">
              <button onclick="clearOutput()" class="form-button secondary clear-all-btn">🗑️ Clear All Skills</button>
              
              <div class="export-import-group">
                  <button onclick="exportAllSkillsAsData()" class="form-button export">💾 Export as Data</button>
                  <button onclick="triggerImport()" class="form-button secondary">📥 Import Data</button>
              </div>
          </div>

          <!-- Collection Management (dynamically shown when multiple skills exist) -->
          <div class="collection-controls" id="collectionControls" style="display: none;">
            <h4 style="color: rgb(138, 43, 226); margin: 0 0 15px 0; font-size: 16px;">📦 Collection Management</h4>
            
            <div style="margin-bottom: 15px;">
              <button onclick="UnifiedSkillsPageController.toggleSelectionMode()" class="form-button secondary" id="selectionModeBtn">
                ✅ Enable Selection Mode
              </button>
              <span style="margin-left: 10px; color: rgb(201, 175, 133); font-size: 14px;" id="selectionStatus">
                Select multiple skills to create a collection
              </span>
            </div>

            <div id="collectionActions" style="display: none;">
              <div style="display: flex; gap: 10px; margin-bottom: 15px; flex-wrap: wrap;">
                <input type="text" id="collectionNameInput" placeholder="Collection Name" 
                       style="flex: 1; min-width: 200px; padding: 10px; border: 2px solid rgb(138, 43, 226); border-radius: 6px; background: rgba(37, 26, 12, 0.8); color: rgb(251, 225, 183);">
                <input type="text" id="collectionDescInput" placeholder="Description (optional)" 
                       style="flex: 2; min-width: 300px; padding: 10px; border: 2px solid rgb(138, 43, 226); border-radius: 6px; background: rgba(37, 26, 12, 0.8); color: rgb(251, 225, 183);">
              </div>
              
              <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                <button onclick="UnifiedSkillsPageController.saveSelectedAsCollection()" class="form-button" style="background: linear-gradient(135deg, rgb(138, 43, 226) 0%, rgb(106, 13, 173) 100%);">
                  💾 Save as Collection
                </button>
                <button onclick="UnifiedSkillsPageController.saveSelectedIndividually()" class="form-button secondary">
                  ⚡ Save Selected Individually
                </button>
                <button onclick="UnifiedSkillsPageController.clearSelection()" class="form-button secondary">
                  🗑️ Clear Selection
                </button>
              </div>
            </div>
          </div>
      </div>

      <!-- Saved Skills Display -->
      <div class="saved-cards-section">
          <h3 class="section-title">⚡ Your Created Skills</h3>
          <div id="outputContainer" class="cards-grid">
              <!-- Generated skills will appear here -->
              <div class="cards-placeholder">
                  <p>⚡ Your saved skills will appear here after you create them!</p>
                  <p style="margin-top: 10px; font-size: 0.9em;">Create multiple skills and save them individually or as collections.</p>
                  <p style="margin-top: 10px; font-size: 0.85em; color: #888;">
                    💡 <strong>Tip:</strong> Create 2+ skills to unlock collection management features!
                  </p>
              </div>
          </div>
      </div>
  </div>

  <!-- Hidden Elements -->
  <div id="errorContainer"></div>
  <input type="file" id="importInput" accept=".json" class="hidden-input" onchange="importSkillData(event)" />

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-title">⚔️ Bazaar Card Generator ⚔️</div>
      <div class="footer-description">
        Bring your ideas to life. Shoutout to Reynad for tearing this masterpeice from the void. 
      </div>
      
      <div class="footer-links">
        <a href="https://github.com/LukeMcPartlan/BazaarGen" class="footer-link">📜 Documentation</a>
        <a href="updates.html" class="footer-link">🛡️ Updates</a>
        <a href="skills.html" class="footer-link">⚡ Skills</a>
        <a href="https://www.reddit.com/r/PlayTheBazaar/" class="footer-link">🏰 Community</a>
      </div>
      
      <div class="footer-divider"></div>
      
      <div class="footer-copyright">
        © 2025 Luke Alvarez Bazaar Generator
      </div>
      <div class="footer-contact">
        Report bugs to Lukemcp45@gmail.com . Zelle me a coffe at the same email!
      </div>
      <div class="footer-version">
        Version 1.0 | Built for Bazaar fans by Bazaar fans
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <!-- Core modules (load first) -->
  <script src="js/core/validation-js.js"></script>
  <script src="js/core/keyword-processor-js.js"></script>
  <script src="js/core/skill-generator-js.js"></script>

  <!-- UI modules -->
  <script src="js/ui/messages-js.js"></script>
  <script src="js/ui/forms-js.js"></script>
  <script src="js/ui/navigation-js.js"></script>
  <script src="js/ui/gallery-modal.js"></script>

  <!-- Auth modules -->
  <script src="js/auth/supabase-client-js.js"></script>
  <script src="js/auth/google-auth-js.js"></script>

  <!-- Data modules -->
  <script src="js/data/export-import-js.js"></script>
  <script src="js/data/database-js.js"></script>

  <!-- Page-specific module (load last) -->
  <script src="js/pages/unified-skills-js.js"></script>

  <script>
    // Enhanced page initialization
    document.addEventListener('DOMContentLoaded', () => {
      console.log('🚀 Unified Skills Page Loading...');
      
      // Show loading indicator
      const loadingIndicator = document.createElement('div');
      loadingIndicator.id = 'skills-loading';
      loadingIndicator.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: linear-gradient(135deg, rgb(138, 43, 226) 0%, rgb(106, 13, 173) 100%);
        color: white;
        padding: 10px 15px;
        border-radius: 6px;
        font-size: 14px;
        z-index: 1000;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        display: flex;
        align-items: center;
        gap: 8px;
      `;
      loadingIndicator.innerHTML = '<div class="loading-spinner"></div>Loading Skills Page...';
      document.body.appendChild(loadingIndicator);
      
      // Remove loading indicator after initialization
      setTimeout(() => {
        if (document.getElementById('skills-loading')) {
          document.body.removeChild(loadingIndicator);
        }
      }, 3000);

      // Add keyboard shortcut hints
      setTimeout(() => {
        if (window.UnifiedSkillsPageController) {
          console.log('📋 Keyboard Shortcuts Available:');
          console.log('  Ctrl+G: Generate Skill');
          console.log('  Ctrl+E: Export Skills');
          console.log('  Ctrl+S: Toggle Selection Mode');
          console.log('  Ctrl+Shift+C: Clear All Skills');
        }
      }, 1000);
    });

    // Global helper functions
    window.debugSkillsPage = () => {
      console.log('=== Unified Skills Page Debug Info ===');
      console.log('Controller available:', typeof UnifiedSkillsPageController !== 'undefined');
      console.log('Skills created:', window.UnifiedSkillsPageController?.skillsData?.length || 0);
      console.log('Collection controls visible:', document.getElementById('collectionControls')?.style.display !== 'none');
      console.log('Selection mode active:', document.querySelectorAll('.skill-selection-checkbox').length > 0);
      console.log('Dependencies:', {
        SupabaseClient: typeof SupabaseClient !== 'undefined',
        SkillGenerator: typeof SkillGenerator !== 'undefined',
        Messages: typeof Messages !== 'undefined',
        GoogleAuth: typeof GoogleAuth !== 'undefined'
      });
    };

    // Collection helper functions
    window.createCollection = (name, description) => {
      if (window.UnifiedSkillsPageController) {
        document.getElementById('collectionNameInput').value = name || '';
        document.getElementById('collectionDescInput').value = description || '';
        
        // Select all skills
        const checkboxes = document.querySelectorAll('.skill-checkbox');
        checkboxes.forEach(cb => cb.checked = true);
        
        // Update status and save
        window.UnifiedSkillsPageController.updateSelectionStatus();
        window.UnifiedSkillsPageController.saveSelectedAsCollection();
      }
    };

    window.saveAllIndividually = () => {
      if (window.UnifiedSkillsPageController) {
        // Select all skills
        const checkboxes = document.querySelectorAll('.skill-checkbox');
        checkboxes.forEach(cb => cb.checked = true);
        
        // Save individually
        window.UnifiedSkillsPageController.saveSelectedIndividually();
      }
    };

    // Error handling
    window.addEventListener('error', (e) => {
      console.error('🚨 Skills page error:', e.error);
    });

    console.log('🎉 Unified Skills Page with Collections loaded!');
  </script>
    
</body>
</html>
