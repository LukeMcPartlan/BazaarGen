<!DOCTYPE html> 
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Skill Generator - Create Custom Skills | BazaarGen Tool</title>
  
  <!-- SEO Meta Tags -->
  <meta name="description" content="Free online tool to create custom skills and abilities for The Bazaar game." />
  <meta name="keywords" content="Bazaar, Bazaar, BazaarGen, Skill Generator, skill creator, game skills, custom skills, ability cards, hero skills, Reynad, The Bazaar, skill creator, game tool, free generator, online tool, skill design, gaming, TCG, trading card game, skill maker, Mak, Vanessa, Pyg, Dooly, game abilities, passive skills, active skills, cooldown, energy cost, skill customization" />
  <meta name="author" content="Luke Alvarez" />
  <meta name="robots" content="index, follow" />
  <meta name="language" content="English" />
  <meta name="revisit-after" content="7 days" />
  
  <!-- Favicon and Icons -->
  <link rel="icon" type="image/x-icon" href="images/favicon.ico" />
  <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png" />
  <link rel="manifest" href="site.webmanifest" />
  
  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="Skill Generator - Create Custom Skills" />
  <meta property="og:description" content="Free online tool to create custom skills and abilities for The Bazaar game." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://Bazaargen.com/skills.html" />
  <meta property="og:image" content="https://Bazaargen.com/images/site-preview.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <meta property="og:site_name" content="BazaarGen - Bazaar Card Generator" />
  
  <!-- Twitter Card Meta Tags -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Skill Generator - Create Custom Skills" />
  <meta name="twitter:description" content="Free online tool to create custom skills and abilities for The Bazaar game." />
  <meta name="twitter:image" content="https://Bazaargen.com/images/site-preview.png" />
  
  <!-- Additional SEO -->
  <meta name="theme-color" content="#8B7A65" />
  <link rel="canonical" href="https://Bazaargen.com/skills.html" />
  
 <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Top Navigation -->
  <nav class="top-nav">
    <div class="nav-container">
      <a href="index.html" class="nav-logo">BazaarGen</a>
      
      <ul class="nav-menu" id="nav-menu">
        <li class="nav-item">
          <a href="index.html" class="nav-link" data-page="items">Items</a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link active" data-page="skills">Skills</a>
        </li>
        <li class="nav-item">
          <a href="#" class="nav-link" data-page="contests">Contests</a>
        </li>
      </ul>

      <div class="nav-toggle" id="nav-toggle">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </nav>

  <div class="main-content">
    <!-- Page Header -->
    <div class="page-header">
      <h1 class="page-title">Skill Generator</h1>
    </div>

    <div class="input-container">
      <div class="form-grid">
        <div class="form-group">
          <label class="form-label" for="skillNameInput">Skill Name</label>
          <input type="text" id="skillNameInput" class="form-input" placeholder="Enter skill name">
        </div>

        <div class="form-group">
          <label class="form-label" for="borderSelect">Border Color</label>
          <select id="borderSelect" class="form-select">
            <option value="bronze">Bronze</option>
            <option value="silver">Silver</option>
            <option value="gold" selected>Gold</option>
            <option value="diamond">Diamond</option>
            <option value="legendary">Legendary</option>
          </select>
        </div>

        <div class="form-group full-width">
          <label class="form-label" for="skillEffectInput">Skill Effect</label>
          <textarea id="skillEffectInput" class="form-input" placeholder="Enter skill effect description" rows="4"></textarea>
        </div>

        <div class="form-group full-width">
          <label class="form-label" for="imageInput">Upload Skill Image</label>
          <input type="file" id="imageInput" class="form-input" accept="image/*">
        </div>
      </div>

      <div class="shortcuts-help">
        <h4>üéÆ Keyword Shortcuts - Type these in text boxes:</h4>
        <div class="shortcut-grid">
          <div class="shortcut-item"><span class="shortcut-key">/s</span> <img src="images/KeyText/slow.png" alt="slow" class="keyword-preview"> <span style="color: rgb(203, 159, 110); font-weight: bold;" class="key-text">slow</span></div>
          <div class="shortcut-item"><span class="shortcut-key">/h</span> <img src="images/KeyText/haste.png" alt="haste" class="keyword-preview"> <span style="color: rgb(0, 235, 195); font-weight: bold;" class="key-text">haste</span></div>
          <div class="shortcut-item"><span class="shortcut-key">/he</span> <img src="images/KeyText/heal.png" alt="heal" class="keyword-preview"> <span style="color: rgb(143, 234, 49); font-weight: bold;" class="key-text">heal</span></div>
          <div class="shortcut-item"><span class="shortcut-key">/r</span> <img src="images/KeyText/regen.png" alt="regen" class="keyword-preview"> <span style="color: rgb(143, 234, 49); font-weight: bold;" class="key-text">regen</span></div>
          <div class="shortcut-item"><span class="shortcut-key">/p</span> <img src="images/KeyText/poison.png" alt="poison" class="keyword-preview"> <span style="color: rgb(13, 190, 79); font-weight: bold;" class="key-text">poison</span></div>
          <div class="shortcut-item"><span class="shortcut-key">/b</span> <img src="images/KeyText/burn.png" alt="burn" class="keyword-preview"> <span style="color: rgb(253, 146, 63); font-weight: bold;" class="key-text">burn</span></div>
          <div class="shortcut-item"><span class="shortcut-key">/c</span> <img src="images/KeyText/charge.png" alt="charge" class="keyword-preview"> <span style="color: rgb(0, 235, 195); font-weight: bold;" class="key-text">charge</span></div>
          <div class="shortcut-item"><span class="shortcut-key">/cd</span> <img src="images/KeyText/cooldown.png" alt="cooldown" class="keyword-preview"> <span style="color: rgb(0, 235, 195); font-weight: bold;" class="key-text">cooldown</span></div>
          <div class="shortcut-item"><span class="shortcut-key">/cr</span> <img src="images/KeyText/crit.png" alt="crit" class="keyword-preview"> <span style="color: rgb(244, 82, 60); font-weight: bold;" class="key-text">crit</span></div>
          <div class="shortcut-item"><span class="shortcut-key">/d</span> <img src="images/KeyText/damage.png" alt="damage" class="keyword-preview"> <span style="color: rgb(244, 82, 60); font-weight: bold;" class="key-text">damage</span></div>
          <div class="shortcut-item"><span class="shortcut-key">/de</span> <img src="images/KeyText/destroy.png" alt="destroy" class="keyword-preview"> <span style="color: rgb(198, 44, 66); font-weight: bold;" class="key-text">destroy</span></div>
          <div class="shortcut-item"><span class="shortcut-key">/f</span> <img src="images/KeyText/freeze.png" alt="freeze" class="keyword-preview"> <span style="color: rgb(63, 200, 247); font-weight: bold;" class="key-text">freeze</span></div>
          <div class="shortcut-item"><span class="shortcut-key">/l</span> <img src="images/KeyText/lifesteal.png" alt="lifesteal" class="keyword-preview"> <span style="color: rgb(181, 56, 115); font-weight: bold;" class="key-text">lifesteal</span></div>
          <div class="shortcut-item"><span class="shortcut-key">/v</span> <img src="images/KeyText/value.png" alt="value" class="keyword-preview"> <span style="color: rgb(244, 208, 33); font-weight: bold;" class="key-text">value</span></div>
          <div class="shortcut-item"><span class="shortcut-key">/t</span> <img src="images/KeyText/transform.png" alt="transform" class="keyword-preview"> <span style="color: rgb(90, 230, 233); font-weight: bold;" class="key-text">transform</span></div>
          <div class="shortcut-item"><span class="shortcut-key">/sh</span> <img src="images/KeyText/sheild.png" alt="sheild" class="keyword-preview"> <span style="color: rgb(245, 208, 33); font-weight: bold;" class="key-text">sheild</span></div>
          <div class="shortcut-item"><span class="shortcut-key">/mh</span> <img src="images/KeyText/maxhealth.png" alt="maxhealth" class="keyword-preview"> <span style="color: rgb(143, 234, 49); font-weight: bold;" class="key-text">maxhealth</span></div>
        </div>
      </div>

      <div class="button-group">
        <button class="form-button" onclick="createSkill()">Generate Skill</button>
        <button class="form-button secondary" onclick="clearOutput()">Clear All</button>
      </div>

      <div class="export-import-section">
        <h4>üíæ Export & Import</h4>
        <div class="export-import-buttons">
          <button onclick="exportAllSkillsAsData()" class="form-button export">Export All as Data</button>
          <button onclick="triggerImport()" class="form-button secondary">Import Skill Data</button>
        </div>
        <input type="file" id="importInput" accept=".json" class="hidden-input" onchange="importSkillData(event)" />
      </div>
    </div>

    <div id="errorContainer"></div>
    <div id="outputContainer"></div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content">
      <div class="footer-title">‚öîÔ∏è Bazaar Skills Generator ‚öîÔ∏è</div>
      <div class="footer-description">
        Bring your ideas to life. Shoutout to Reynad for tearing this masterpiece from the void. 
      </div>
      
      <div class="footer-links">
        <a href="https://github.com/LukeMcPartlan/BazaarGen" class="footer-link">üìú Documentation</a>
        <a href="updates.html" class="footer-link">üõ°Ô∏è Updates</a>
        <a href="index.html" class="footer-link">üÉè Cards</a>
        <a href="https://www.reddit.com/r/PlayTheBazaar/" class="footer-link">üè∞ Community</a>
      </div>
      
      <div class="footer-divider"></div>
      
      <div class="footer-copyright">
        ¬© 2025 Luke Alvarez Bazaar Generator
      </div>
      <div class="footer-contact">
        Report bugs to Lukemcp45@gmail.com . Zelle me a coffee at the same email!
      </div>
      <div class="footer-version">
        Version 1.0 | Built for Bazaar fans by Bazaar fans
      </div>
    </div>
  </footer>

  <script>
    // Store all skills data for export/import
    let skillsData = [];

    // Navigation functionality
    document.addEventListener('DOMContentLoaded', function() {
      const navToggle = document.getElementById('nav-toggle');
      const navMenu = document.getElementById('nav-menu');

      // Toggle mobile menu
      navToggle.addEventListener('click', function() {
        navMenu.classList.toggle('active');
      });

      // Close mobile menu when clicking outside
      document.addEventListener('click', function(e) {
        if (!navToggle.contains(e.target) && !navMenu.contains(e.target)) {
          navMenu.classList.remove('active');
        }
      });

      // Close export menus when clicking outside
      document.addEventListener('click', function(e) {
        if (!e.target.closest('.skill-export-btn') && !e.target.closest('.export-menu')) {
          document.querySelectorAll('.export-menu').forEach(menu => {
            menu.classList.remove('show');
          });
        }
      });
    });

    // Define keyword colors and styling rules (same as card generator)
    const keywordRules = {
      'slow': { color: 'rgb(203, 159, 110)' },
      'haste': { color: 'rgb(0, 235, 195)' },
      'charge': { color: 'rgb(0, 235, 195)' },
      'cooldown': { color: 'rgb(0, 235, 195)' },
      'heal': { color: 'rgb(143, 234, 49)' },
      'regen': { color: 'rgb(143, 234, 49)' },
      'poison': { color: 'rgb(13, 190, 79)' },
      'burn': { color: 'rgb(253, 146, 63)' },
      'crit': { color: 'rgb(244, 82, 60)' },
      'damage': { color: 'rgb(244, 82, 60)' },
      'freeze': { color: 'rgb(63, 200, 247)' },
      'lifesteal': { color: 'rgb(181, 56, 115)' },
      'value': { color: 'rgb(244, 208, 33)' },
      'destroy': { color: 'rgb(198, 44, 66)' },
      'transform': { color: 'rgb(90, 230, 233)' },
      'sheild': { color: 'rgb(245, 208, 33)' },
      'maxhealth': { color: 'rgb(143, 234, 49)' }
    };

    function processKeywordText(text) {
      if (!text || typeof text !== 'string') return text;
      
      let processedText = text;
      
      // Process LONGER patterns FIRST to avoid conflicts
      processedText = processedText.replace(/\/cd/g, '[COOLDOWN_ICON]');  // Process /cd before /c
      processedText = processedText.replace(/\/cr/g, '[CRIT_ICON]');      // Process /cr before /c
      processedText = processedText.replace(/\/he/g, '[HEAL_ICON]');      // Process /he before /h
      processedText = processedText.replace(/\/sh/g, '[SHEILD_ICON]');    // Process /sh before /s
      processedText = processedText.replace(/\/mh/g, '[MAXHEALTH_ICON]'); // Process /mh before /h
      processedText = processedText.replace(/\/de/g, '[DESTROY_ICON]');   // Process /de before /d
      
      // Then process single-letter patterns
      processedText = processedText.replace(/\/s/g, '[SLOW_ICON]');
      processedText = processedText.replace(/\/h/g, '[HASTE_ICON]');
      processedText = processedText.replace(/\/r/g, '[REGEN_ICON]');
      processedText = processedText.replace(/\/p/g, '[POISON_ICON]');
      processedText = processedText.replace(/\/b/g, '[BURN_ICON]');
      processedText = processedText.replace(/\/c/g, '[CHARGE_ICON]');
      processedText = processedText.replace(/\/d/g, '[DAMAGE_ICON]');
      processedText = processedText.replace(/\/f/g, '[FREEZE_ICON]');
      processedText = processedText.replace(/\/l/g, '[LIFESTEAL_ICON]');
      processedText = processedText.replace(/\/v/g, '[VALUE_ICON]');
      processedText = processedText.replace(/\/t/g, '[TRANSFORM_ICON]');
      
      // Create a regex pattern that matches all keywords (case insensitive)
      const keywords = Object.keys(keywordRules);
      const pattern = new RegExp(`\\b(${keywords.join('|')})\\b`, 'gi');
      
      // Replace each keyword with styled span
      processedText = processedText.replace(pattern, (match) => {
        const lowerMatch = match.toLowerCase();
        const rule = keywordRules[lowerMatch];
        if (rule) {
          return `<span style="color: ${rule.color}; font-weight: bold;" class="key-text" data-keyword="${lowerMatch}">${match}</span>`;
        }
        return match;
      });
      
      // Finally, replace all placeholders with actual images
      processedText = processedText.replace(/\[SLOW_ICON\]/g, '<img src="images/KeyText/slow.png" alt="slow" class="keyword-icon">');
      processedText = processedText.replace(/\[HASTE_ICON\]/g, '<img src="images/KeyText/haste.png" alt="haste" class="keyword-icon">');
      processedText = processedText.replace(/\[HEAL_ICON\]/g, '<img src="images/KeyText/heal.png" alt="heal" class="keyword-icon">');
      processedText = processedText.replace(/\[REGEN_ICON\]/g, '<img src="images/KeyText/regen.png" alt="regen" class="keyword-icon">');
      processedText = processedText.replace(/\[POISON_ICON\]/g, '<img src="images/KeyText/poison.png" alt="poison" class="keyword-icon">');
      processedText = processedText.replace(/\[BURN_ICON\]/g, '<img src="images/KeyText/burn.png" alt="burn" class="keyword-icon">');
      processedText = processedText.replace(/\[CHARGE_ICON\]/g, '<img src="images/KeyText/charge.png" alt="charge" class="keyword-icon">');
      processedText = processedText.replace(/\[COOLDOWN_ICON\]/g, '<img src="images/KeyText/cooldown.png" alt="cooldown" class="keyword-icon">');
      processedText = processedText.replace(/\[CRIT_ICON\]/g, '<img src="images/KeyText/crit.png" alt="crit" class="keyword-icon">');
      processedText = processedText.replace(/\[DAMAGE_ICON\]/g, '<img src="images/KeyText/damage.png" alt="damage" class="keyword-icon">');
      processedText = processedText.replace(/\[DESTROY_ICON\]/g, '<img src="images/KeyText/destroy.png" alt="destroy" class="keyword-icon">');
      processedText = processedText.replace(/\[FREEZE_ICON\]/g, '<img src="images/KeyText/freeze.png" alt="freeze" class="keyword-icon">');
      processedText = processedText.replace(/\[LIFESTEAL_ICON\]/g, '<img src="images/KeyText/lifesteal.png" alt="lifesteal" class="keyword-icon">');
      processedText = processedText.replace(/\[VALUE_ICON\]/g, '<img src="images/KeyText/value.png" alt="value" class="keyword-icon">');
      processedText = processedText.replace(/\[TRANSFORM_ICON\]/g, '<img src="images/KeyText/transform.png" alt="transform" class="keyword-icon">');
      processedText = processedText.replace(/\[SHEILD_ICON\]/g, '<img src="images/KeyText/sheild.png" alt="sheild" class="keyword-icon">');
      processedText = processedText.replace(/\[MAXHEALTH_ICON\]/g, '<img src="images/KeyText/maxhealth.png" alt="maxhealth" class="keyword-icon">');
      return processedText;
    }

    function getBorderColor(value) {
      switch(value) {
        case 'bronze': return 'rgb(205, 127, 50)';
        case 'silver': return 'silver';
        case 'gold': return 'gold';
        case 'diamond': return 'rgb(185, 242, 255)';
        case 'legendary': return 'red';
        default: return 'gold';
      }
    }

    function clearSkill(skillElement) {
      const skillIndex = Array.from(skillElement.parentNode.children).indexOf(skillElement);
      skillsData.splice(skillIndex, 1);
      skillElement.remove();
    }

    function toggleExportMenu(button, skillData) {
      // Close all other export menus
      document.querySelectorAll('.export-menu').forEach(menu => {
        if (menu.parentElement !== button.parentElement) {
          menu.classList.remove('show');
        }
      });

      let menu = button.parentElement.querySelector('.export-menu');
      if (!menu) {
        menu = document.createElement('div');
        menu.className = 'export-menu';
        
        const dataOption = document.createElement('div');
        dataOption.className = 'export-option';
        dataOption.textContent = 'Export as Data';
        dataOption.onclick = () => {
          exportSingleSkillAsData(skillData);
          menu.classList.remove('show');
        };
        
        menu.appendChild(dataOption);
        button.parentElement.appendChild(menu);
      }

      menu.classList.toggle('show');
    }

    function exportSingleSkillAsData(skillData) {
      const dataToExport = {
        version: "1.0",
        timestamp: new Date().toISOString(),
        skills: [skillData]
      };

      const dataStr = JSON.stringify(dataToExport, null, 2);
      const dataBlob = new Blob([dataStr], { type: 'application/json' });
      const url = URL.createObjectURL(dataBlob);
      
      const link = document.createElement('a');
      link.href = url;
      link.download = `${skillData.skillName.replace(/\s+/g, '-')}-skill.json`;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      URL.revokeObjectURL(url);

      showMessage('Skill exported successfully!', 'success');
    }

    function exportAllSkillsAsData() {
      if (skillsData.length === 0) {
        showMessage('No skills to export!', 'error');
        return;
      }

      const dataToExport = {
        version: "1.0",
        timestamp: new Date().toISOString(),
        skills: skillsData
      };

      const dataStr = JSON.stringify(dataToExport, null, 2);
      const dataBlob = new Blob([dataStr], { type: 'application/json' });
      const url = URL.createObjectURL(dataBlob);
      
      const link = document.createElement('a');
      link.href = url;
      link.download = `Bazaar-skills-${new Date().toISOString().split('T')[0]}.json`;
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      URL.revokeObjectURL(url);

      showMessage(`Exported ${skillsData.length} skills successfully!`, 'success');
    }

    function triggerImport() {
      document.getElementById('importInput').click();
    }

    function importSkillData(event) {
      const file = event.target.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.onload = function(e) {
        try {
          const importedData = JSON.parse(e.target.result);
          
          if (!importedData.skills || !Array.isArray(importedData.skills)) {
            throw new Error('Invalid file format');
          }

          let importedCount = 0;
          importedData.skills.forEach(skillData => {
            try {
              importSingleSkill(skillData);
              importedCount++;
            } catch (error) {
              console.error('Error importing skill:', error);
            }
          });

          if (importedCount > 0) {
            showMessage(`Successfully imported ${importedCount} skills!`, 'success');
          } else {
            showMessage('No skills could be imported from this file.', 'error');
          }

        } catch (error) {
          showMessage('Error reading file: ' + error.message, 'error');
        }
      };
      reader.readAsText(file);
      
      // Clear the input
      event.target.value = '';
    }

    function importSingleSkill(skillData) {
      const outputContainer = document.getElementById("outputContainer");
      const borderColor = getBorderColor(skillData.border);
      
      const skillCard = document.createElement("div");
      skillCard.className = "skill-card";

      // Add delete and export buttons for individual skill
      const skillControls = document.createElement("div");
      skillControls.className = "skill-controls";
      
      const exportBtn = document.createElement("button");
      exportBtn.className = "skill-export-btn";
      exportBtn.innerHTML = "üíæ";
      exportBtn.title = "Export this skill";
      exportBtn.onclick = function() {
        toggleExportMenu(exportBtn, skillData);
      };
      
      const deleteBtn = document.createElement("button");
      deleteBtn.className = "skill-delete-btn";
      deleteBtn.innerHTML = "√ó";
      deleteBtn.title = "Delete this skill";
      deleteBtn.onclick = function() {
        clearSkill(skillCard);
      };
      
      skillControls.appendChild(exportBtn);
      skillControls.appendChild(deleteBtn);
      skillCard.appendChild(skillControls);

      const imageContainer = document.createElement("div");
      imageContainer.className = "skill-image-container";
      imageContainer.style.border = `3px solid ${borderColor}`;

      const img = document.createElement("img");
      img.src = skillData.imageData;
      imageContainer.appendChild(img);

      // Create border overlay
      const imageBorderOverlay = document.createElement("img");
      imageBorderOverlay.className = "skill-border-overlay";
      imageBorderOverlay.src = `images/${skillData.border}_skill_border.png`;
      imageBorderOverlay.onerror = function() {
        this.style.display = 'none';
      };
      imageBorderOverlay.alt = "";
      imageContainer.appendChild(imageBorderOverlay);

      const content = document.createElement("div");
      content.className = "skill-content";
      content.style.border = `3px solid ${borderColor}`;

      const headerSection = document.createElement("div");
      headerSection.className = "skill-header";
      headerSection.style.borderTop = `2px solid ${borderColor}`;
      headerSection.style.borderBottom = `2px solid ${borderColor}`;
      
      const skillTitle = document.createElement("div");
      skillTitle.className = "skill-title";
      skillTitle.textContent = skillData.skillName;
      headerSection.appendChild(skillTitle);

      const effectSection = document.createElement("div");
      effectSection.className = "skill-effect";
      effectSection.style.borderTop = `2px solid ${borderColor}`;
      effectSection.style.borderBottom = `2px solid ${borderColor}`;
      effectSection.innerHTML = processKeywordText(skillData.skillEffect);

      content.appendChild(headerSection);
      content.appendChild(effectSection);

      skillCard.appendChild(imageContainer);
      skillCard.appendChild(content);
      outputContainer.appendChild(skillCard);

      // Add to skills data
      skillsData.push(skillData);
    }

    function showMessage(message, type) {
      const errorContainer = document.getElementById("errorContainer");
      const messageDiv = document.createElement("div");
      messageDiv.className = type;
      messageDiv.textContent = message;
      
      // Clear previous messages
      errorContainer.innerHTML = '';
      errorContainer.appendChild(messageDiv);
      
      // Auto-remove success messages after 3 seconds
      if (type === 'success') {
        setTimeout(() => {
          if (messageDiv.parentElement) {
            messageDiv.remove();
          }
        }, 3000);
      }
    }

    function createSkill() {
      const imageInput = document.getElementById("imageInput");
      const skillName = document.getElementById("skillNameInput").value;
      const skillEffect = document.getElementById("skillEffectInput").value;
      const border = document.getElementById("borderSelect").value;
      const outputContainer = document.getElementById("outputContainer");
      const errorContainer = document.getElementById("errorContainer");

      // Clear previous errors
      errorContainer.innerHTML = '';

      // Validate inputs
      if (!skillName.trim()) {
        const errorDiv = document.createElement("div");
        errorDiv.className = "error";
        errorDiv.textContent = "Please enter a skill name.";
        errorContainer.appendChild(errorDiv);
        return;
      }

      if (!skillEffect.trim()) {
        const errorDiv = document.createElement("div");
        errorDiv.className = "error";
        errorDiv.textContent = "Please enter a skill effect.";
        errorContainer.appendChild(errorDiv);
        return;
      }

      if (!imageInput.files || !imageInput.files[0]) {
        const errorDiv = document.createElement("div");
        errorDiv.className = "error";
        errorDiv.textContent = "Please upload an image.";
        errorContainer.appendChild(errorDiv);
        return;
      }

      const reader = new FileReader();

      reader.onload = function (e) {
        const imageData = e.target.result;
        
        // Create skill data object for export/import
        const skillData = {
          skillName: skillName,
          skillEffect: skillEffect,
          border: border,
          imageData: imageData,
          timestamp: new Date().toISOString()
        };

        // Store skill data
        skillsData.push(skillData);

        const borderColor = getBorderColor(border);
        const skillCard = document.createElement("div");
        skillCard.className = "skill-card";

        // Add delete and export buttons for individual skill
        const skillControls = document.createElement("div");
        skillControls.className = "skill-controls";
        
        const exportBtn = document.createElement("button");
        exportBtn.className = "skill-export-btn";
        exportBtn.innerHTML = "üíæ";
        exportBtn.title = "Export this skill";
        exportBtn.onclick = function() {
          toggleExportMenu(exportBtn, skillData);
        };
        
        const deleteBtn = document.createElement("button");
        deleteBtn.className = "skill-delete-btn";
        deleteBtn.innerHTML = "√ó";
        deleteBtn.title = "Delete this skill";
        deleteBtn.onclick = function() {
          clearSkill(skillCard);
        };
        
        skillControls.appendChild(exportBtn);
        skillControls.appendChild(deleteBtn);
        skillCard.appendChild(skillControls);

        const imageContainer = document.createElement("div");
        imageContainer.className = "skill-image-container";
        imageContainer.style.border = `3px solid ${borderColor}`;

        const img = document.createElement("img");
        img.src = imageData;
        
        imageContainer.appendChild(img);

        // Create border overlay - positioned relative to image container, not skill card
        const imageBorderOverlay = document.createElement("img");
        imageBorderOverlay.className = "skill-border-overlay";
        imageBorderOverlay.src = `images/${border}_skill_border.png`;
        
        // Hide broken image if it doesn't load
        imageBorderOverlay.onerror = function() {
          this.style.display = 'none';
        };
        
        // No alt text since it's purely decorative
        imageBorderOverlay.alt = "";

        // Add border overlay to the image container so it moves with the image
        imageContainer.appendChild(imageBorderOverlay);

        const content = document.createElement("div");
        content.className = "skill-content";
        content.style.border = `3px solid ${borderColor}`;

        const headerSection = document.createElement("div");
        headerSection.className = "skill-header";
        headerSection.style.borderTop = `2px solid ${borderColor}`;
        headerSection.style.borderBottom = `2px solid ${borderColor}`;
        
        const skillTitle = document.createElement("div");
        skillTitle.className = "skill-title";
        skillTitle.textContent = skillName;
        headerSection.appendChild(skillTitle);

        const effectSection = document.createElement("div");
        effectSection.className = "skill-effect";
        effectSection.style.borderTop = `2px solid ${borderColor}`;
        effectSection.style.borderBottom = `2px solid ${borderColor}`;
        effectSection.innerHTML = processKeywordText(skillEffect);

        content.appendChild(headerSection);
        content.appendChild(effectSection);

        skillCard.appendChild(imageContainer);
        skillCard.appendChild(content);
        outputContainer.appendChild(skillCard);
      };

      reader.readAsDataURL(imageInput.files[0]);
    }

    function clearOutput() {
      document.getElementById("outputContainer").innerHTML = '';
      document.getElementById("errorContainer").innerHTML = '';
      document.getElementById("skillNameInput").value = '';
      document.getElementById("skillEffectInput").value = '';
      document.getElementById("imageInput").value = '';
      document.getElementById("borderSelect").value = 'gold';
      skillsData = [];
    }
  </script>
</body>
</html>
