<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bazaar Items Browser - View Community Creations | BazaarGen</title>
    
    <!-- External Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- Core scripts -->
    <script src="js/core/validation-js.js"></script>
    <script src="js/core/keyword-processor-js.js"></script>
    <script src="js/core/card-generator-js.js"></script>
    <script src="js/ui/messages-js.js"></script>
    
    <!-- Database and Browse functionality -->
    <script src="js/auth/supabase-client-js.js"></script>
    <script src="js/pages/browse-js.js"></script>
    
    <link rel="stylesheet" href="styles.css" />

<div id="alias-modal" style="display: none;">
    <div>
        <h2 id="alias-modal-title">Welcome to BazaarGen!</h2>
        <p id="alias-modal-description">Choose an alias to display on the site</p>
        
        <input type="text" id="alias-input" placeholder="Enter your alias">
        
        <div id="alias-error"></div>
        
        <div class="button-group">
            <button id="alias-cancel-btn" onclick="cancelAliasCreation()">Cancel</button>
            <button id="alias-save-btn" onclick="saveAlias()">Save Alias</button>
        </div>
    </div>
</div>

<!-- Add Google Sign-In -->
<script src="https://accounts.google.com/gsi/client" async defer></script>
<script src="js/auth/google-auth-js.js"></script>

    
</head>
<body>
    <!-- Navigation -->
    <nav class="top-nav">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">⚔️ BazaarGen</a>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-link">Items</a></li>
                <li><a href="skills.html" class="nav-link">Skills</a></li>
                <li><a href="#" class="nav-link active">Browse</a></li>
                <li><a href="contests.html" class="nav-link">Contests</a></li>
            </ul>
            <div class="nav-actions">
    <!-- Google Sign-In Button (shown when not signed in) -->
    <div id="google-signin-button"></div>

    <!-- User Info (shown when signed in) -->
    <div class="user-info" id="user-info" style="display: none;">
        <span class="user-alias" id="user-alias" onclick="editAlias()" title="Click to edit alias"></span>
        <button class="sign-out-btn" onclick="signOut()">Sign Out</button>
    </div>
</div>
        </div>
    </nav>

    <div class="main-content">
        <!-- Header -->
        <div class="page-header">
            <h1 class="page-title">Community Items Browser</h1>
            <p class="page-subtitle">Discover amazing creations from the BazaarGen community</p>
        </div>

        <!-- Controls -->
        <div class="controls-panel">
            <div class="controls-grid">
                <div class="control-group">
                    <label class="control-label">Sort By</label>
                    <select id="sortBy" class="control-select">
                        <option value="recent">Most Recent</option>
                        <option value="oldest">Oldest First</option>
                    </select>
                </div>

                <div class="control-group">
                    <label class="control-label">Hero Filter</label>
                    <select id="heroFilter" class="control-select">
                        <option value="">All Heroes</option>
                        <option value="Neutral">Neutral</option>
                        <option value="Mak">Mak</option>
                        <option value="Vanessa">Vanessa</option>
                        <option value="Pyg">Pyg</option>
                        <option value="Dooly">Dooly</option>
                        <option value="Stelle">Stelle</option>
                        <option value="Jules">Jules</option>
                        <option value="Vampire">Vampire</option>
                    </select>
                </div>

                <div class="control-group">
                    <label class="control-label">Search</label>
                    <input type="text" id="searchInput" class="control-input" placeholder="Search items...">
                </div>

                <div class="control-group">
                    <label class="control-label">Contest Filter</label>
                    <select id="contestFilter" class="control-select">
                        <option value="">All Items</option>
                        <option value="0">General Items</option>
                        <option value="1">Contest 1</option>
                        <option value="2">Contest 2</option>
                        <option value="3">Contest 3</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Stats -->
        <div class="stats-bar">
            <div class="stat-item">
                Total Items: <span class="stat-value" id="totalItems">0</span>
            </div>
            <div class="stat-item">
                Showing: <span class="stat-value" id="showingItems">0</span>
            </div>
            <div class="stat-item">
                <span id="loadingText" style="display: none;">Loading...</span>
            </div>
        </div>

        <!-- Messages -->
        <div id="errorMessage" class="error" style="display: none;"></div>
        <div id="loadingMessage" class="loading" style="display: none;">Loading items...</div>
        <div id="noResults" class="no-results" style="display: none;">
            No items found. Try adjusting your filters.
        </div>

        <!-- Items Grid -->
        <div id="itemsGrid" class="items-grid"></div>

        <!-- Load More -->
        <div class="load-more-container">
            <button id="loadMoreBtn" class="btn" style="display: none;">Load More Items</button>
            <div id="endMessage" style="display: none; text-align: center; padding: 20px; color: rgb(201, 175, 133);">
                You've seen all available items!
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer style="background: linear-gradient(135deg, rgb(74, 60, 46) 0%, rgb(89, 72, 51) 100%); border-top: 3px solid rgb(251, 225, 183); margin-top: 40px; padding: 30px 0; text-align: center; box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.3);">
        <div style="max-width: 800px; margin: 0 auto; padding: 0 20px;">
            <div style="color: rgb(251, 225, 183); font-size: 1.5em; font-weight: bold; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 1px; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);">
                ⚔️ BazaarGen Community Browser ⚔️
            </div>
            <div style="color: rgb(201, 175, 133); font-size: 1em; margin-bottom: 20px; line-height: 1.6;">
                Explore amazing creations from the BazaarGen community. Filter, search, and discover new items!
            </div>
            
            <div style="height: 2px; background: linear-gradient(90deg, transparent 0%, rgb(218, 165, 32) 50%, transparent 100%); margin: 20px 0;"></div>
            
            <div style="color: rgb(150, 120, 90); font-size: 0.9em; font-style: italic;">
                © 2025 BazaarGen Community Browser
            </div>
            <div style="color: rgb(150, 120, 90); font-size: 0.9em; margin-top: 8px;">
                Built for The Bazaar community
            </div>
        </div>
    </footer>
</body>
</html>
